{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/router';\nimport { Modal } from '../../components/Modal';\nimport { Layout } from '../../components/Layout';\nimport { Form } from '../../components/Form';\nimport { Card } from '../../components/Card';\nvar BASE_URL = 'https://simple-blog-api.crew.red/posts';\n\nvar New = function New() {\n  var _useState = useState(false),\n      isModalOpen = _useState[0],\n      setIsModalOpen = _useState[1];\n\n  var _useState2 = useState(''),\n      currentTitle = _useState2[0],\n      setCurrentTitle = _useState2[1];\n\n  var router = useRouter();\n\n  var setNewPost = function setNewPost(post) {\n    return _regeneratorRuntime.async(function setNewPost$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setCurrentTitle(post.title);\n            setIsModalOpen(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios({\n              method: 'post',\n              url: \"\".concat(BASE_URL),\n              data: post\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var closeModal = function closeModal() {\n    return _regeneratorRuntime.async(function closeModal$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(router.push('/'));\n\n          case 2:\n            setIsModalOpen(false);\n            setCurrentTitle('');\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars,@typescript-eslint/explicit-function-return-type\n    function handleRemoveClick() {\n      document.removeEventListener('click', closeModal);\n    }\n  }, []);\n  return __jsx(Layout, null, __jsx(Card, {\n    heading: \"Create new post now!\"\n  }, __jsx(Form, {\n    onSubmitForm: setNewPost\n  })), isModalOpen && __jsx(Modal, {\n    onClose: closeModal,\n    title: currentTitle\n  }, __jsx(\"p\", null, \"Success!!!\"), __jsx(\"p\", null, \"The post was successfully added!\")));\n};\n\nexport default New;","map":null,"metadata":{},"sourceType":"module"}